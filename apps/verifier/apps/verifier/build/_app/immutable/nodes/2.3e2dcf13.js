import{a as o,f as C,d as Ie,t as L}from"../chunks/8245242a.js";import{i as Ee,j as sa,h as ia,g as e,ag as na,H as la,_ as $r,Z as br,a9 as Ge,D as De,G as da,ae as ua,X as yr,ah as ca,I as We,ai as va,aj as fa,ak as pa,ac as rr,al as ma,A as xr,am as ga,an as _a,ao as ha,L as wr,ap as ye,aq as Cr,K as Pr,ar as Ke,ab as $a,Y as ba,a7 as ya,p as xa,d as H,as as Xe,l as je,b as s,a as wa,s as i,c as d,f as Y,r as u,t as Z,n as D,at as $e}from"../chunks/892810b2.js";import{s as E}from"../chunks/4997b911.js";import{i as ne,s as Ar,a as Aa}from"../chunks/0b1ed176.js";import{c as N}from"../chunks/9d9c059e.js";import{r as ka,e as Ra,B as we,s as kr}from"../chunks/c73eed40.js";import{g as Ca}from"../chunks/fc255337.js";import{t as Pa,a as Ia,u as Ea,b as Te,i as Ta,c as Sa}from"../chunks/68da17bd.js";import{c as Se,d as Me,C as Ue,a as Fe,L as Re,b as Je,I as Ne}from"../chunks/9a050b2b.js";function Ma(t,c){return c}function Na(t,c,_){for(var G=[],B=c.length,w,$=c.length,l=0;l<B;l++){let R=c[l];Pr(R,()=>{if(w){if(w.pending.delete(R),w.done.add(R),w.pending.size===0){var te=t.outrogroups;er(rr(w.done)),te.delete(w),te.size===0&&(t.outrogroups=null)}}else $-=1},!1)}if($===0){var v=G.length===0&&_!==null;if(v){var m=_,A=m.parentNode;$a(A),A.append(m),t.items.clear()}er(c,!v)}else w={pending:new Set(c),done:new Set},(t.outrogroups??=new Set).add(w)}function er(t,c=!0){for(var _=0;_<t.length;_++)ba(t[_],c)}var Rr;function La(t,c,_,G,B,w=null){var $=t,l=new Map;Ee&&sa();var v=null,m=fa(()=>{var U=_();return pa(U)?U:U==null?[]:rr(U)}),A,R=!0;function te(){r.fallback=v,Da(r,A,$,c,G),v!==null&&(A.length===0?(v.f&ye)===0?Cr(v):(v.f^=ye,Le(v,null,$)):Pr(v,()=>{v=null}))}var oe=ia(()=>{A=e(m);var U=A.length;let ce=!1;if(Ee){var le=na($)===la;le!==(U===0)&&($=$r(),br($),Ge(!1),ce=!0)}for(var K=new Set,se=ca,X=va(),j=0;j<U;j+=1){Ee&&De.nodeType===da&&De.data===ua&&($=De,ce=!0,Ge(!1));var _e=A[j],ie=G(_e,j),x=R?null:l.get(ie);x?(x.v&&yr(x.v,_e),x.i&&yr(x.i,j),X&&se.skipped_effects.delete(x.e)):(x=Ua(l,R?$:Rr??=wr(),_e,ie,j,B,c,_),R||(x.e.f|=ye),l.set(ie,x)),K.add(ie)}if(U===0&&w&&!v&&(R?v=We(()=>w($)):(v=We(()=>w(Rr??=wr())),v.f|=ye)),Ee&&U>0&&br($r()),!R)if(X){for(const[he,xe]of l)K.has(he)||se.skipped_effects.add(xe.e);se.oncommit(te),se.ondiscard(()=>{})}else te();ce&&Ge(!0),e(m)}),r={effect:oe,items:l,outrogroups:null,fallback:v};R=!1,Ee&&($=De)}function Da(t,c,_,G,B){var w=c.length,$=t.items,l=t.effect.first,v,m=null,A=[],R=[],te,oe,r,U;for(U=0;U<w;U+=1){if(te=c[U],oe=B(te,U),r=$.get(oe).e,t.outrogroups!==null)for(const x of t.outrogroups)x.pending.delete(r),x.done.delete(r);if((r.f&ye)!==0)if(r.f^=ye,r===l)Le(r,null,_);else{var ce=m?m.next:l;r===t.effect.last&&(t.effect.last=r.prev),r.prev&&(r.prev.next=r.next),r.next&&(r.next.prev=r.prev),be(t,m,r),be(t,r,ce),Le(r,ce,_),m=r,A=[],R=[],l=m.next;continue}if((r.f&Ke)!==0&&Cr(r),r!==l){if(v!==void 0&&v.has(r)){if(A.length<R.length){var le=R[0],K;m=le.prev;var se=A[0],X=A[A.length-1];for(K=0;K<A.length;K+=1)Le(A[K],le,_);for(K=0;K<R.length;K+=1)v.delete(R[K]);be(t,se.prev,X.next),be(t,m,se),be(t,X,le),l=le,m=X,U-=1,A=[],R=[]}else v.delete(r),Le(r,l,_),be(t,r.prev,r.next),be(t,r,m===null?t.effect.first:m.next),be(t,m,r),m=r;continue}for(A=[],R=[];l!==null&&l!==r;)(v??=new Set).add(l),R.push(l),l=l.next;if(l===null)continue}(r.f&ye)===0&&A.push(r),m=r,l=r.next}if(t.outrogroups!==null){for(const x of t.outrogroups)x.pending.size===0&&(er(rr(x.done)),t.outrogroups?.delete(x));t.outrogroups.size===0&&(t.outrogroups=null)}if(l!==null||v!==void 0){var j=[];if(v!==void 0)for(r of v)(r.f&Ke)===0&&j.push(r);for(;l!==null;)(l.f&Ke)===0&&l!==t.fallback&&j.push(l),l=l.next;var _e=j.length;if(_e>0){var ie=null;Na(t,j,ie)}}}function Ua(t,c,_,G,B,w,$,l){var v=($&ga)!==0?($&_a)===0?ha(_,!1,!1):xr(_):null,m=($&ma)!==0?xr(B):null;return{v,i:m,e:We(()=>(w(c,v??_,m??B,l),()=>{t.delete(G)}))}}function Le(t,c,_){if(t.nodes)for(var G=t.nodes.start,B=t.nodes.end,w=c&&(c.f&ye)===0?c.nodes.start:_;G!==null;){var $=ya(G);if(w.before(G),G===B)return;G=$}}function be(t,c,_){c===null?t.effect.first=_:c.next=_,_===null?t.effect.last=c:_.prev=c}function Ir(t,c){const _={get(G,B){if(typeof B=="string"){const w=[...c,B];return Ir(t,w)}else if(B===Pa){if(c.length<1){const w=[t,...c].join(".");throw new Error(`API path is expected to be of the form \`${t}.childComponent.functionName\`. Found: \`${w}\``)}return"_reference/childComponent/"+c.join("/")}else return}};return new Proxy({},_)}const Fa=()=>Ir("components",[]),ue=Ia;Fa();var qa=C('<div class="border border-destructive/50 bg-destructive/10 p-3 text-destructive"> </div>'),za=C('<div class="border border-primary/40 bg-primary/10 p-3 text-primary"> </div>'),Oa=C('<div class="grid gap-4 sm:grid-cols-3"><div><p class="info-kicker">Pending</p> <p class="mt-2 text-4xl font-display"> </p></div> <div><p class="info-kicker">Escalated</p> <p class="mt-2 text-4xl font-display"> </p></div> <div><p class="info-kicker">Current Claim</p> <p class="mt-2 text-lg font-semibold"> </p> <p class="meta-text mt-1"> </p></div></div>'),Va=C("<option> </option>"),Ha=C('<p class="meta-text"> </p>'),Ba=C('<div class="space-y-2"><!> <select id="languageCode" class="w-full border border-input bg-background px-3 py-2.5 text-base"><!></select></div> <!>',1),Qa=C("<!> <!>",1),Ya=C("<!> <!>",1),Za=C('<div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div> <!>',1),Ga=C("<!> <!>",1),Ka=C("<!> <!>",1),Xa=C('<div class="border border-orange-500/50 bg-orange-500/10 p-3 text-orange-700"> </div>'),ja=C("<!> <!>",1),Ja=C("<!> <!>",1),Wa=C("<!> <!>",1),et=C('<div class="border border-border/50 bg-muted/30 p-3"><p class="info-kicker mb-2">Learner Audio</p> <audio controls class="audio-playback w-full"></audio></div>'),rt=C('<div class="border border-border/50 bg-background/70 p-3"><p class="info-kicker">Original Review</p> <p class="mt-1 font-semibold"> </p> <p class="meta-text"> </p> <p class="meta-text mt-2"> </p></div>'),at=C('<p class="mt-2 text-destructive"> </p>'),tt=C('<div class="mt-3 space-y-2"><p class="meta-text"> </p> <audio controls class="audio-playback w-full"></audio></div>'),ot=C('<div class="border border-border/50 bg-muted/40 p-3"><p class="info-kicker">Phrase</p> <p class="mt-1 font-semibold"> </p> <p class="meta-text text-primary"> </p></div> <!> <!> <div class="grid grid-cols-1 gap-3"><div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div></div> <div class="border border-dashed p-3"><p class="meta-text">Record exemplar pronunciation</p> <div class="mt-3 flex flex-wrap gap-2"><!> <!></div> <!> <!></div> <div class="grid grid-cols-2 gap-2"><!> <!></div>',1),st=C("<!> <!>",1),it=C("<!> <!>",1),nt=C('<div class="page-shell page-shell--compact page-stack"><header class="page-stack"><div><p class="info-kicker">Two-Minute Review Cycles</p> <h1 class="text-5xl sm:text-6xl">Verifier Queue</h1> <p class="meta-text mt-3">Claim quickly, score clearly, and keep learner feedback moving.</p></div></header> <!> <!> <!> <!> <!></div>');function _t(t,c){xa(c,!0);const _=()=>Ar(Ta,"$isLoading",B),G=()=>Ar(Sa,"$isAuthenticated",B),[B,w]=Aa(),$=Ea(),l=Te(ue.verifierAccess.listSupportedLanguages,{}),v=Te(ue.verifierAccess.getMyVerifierState,{});let m=H("xh-ZA"),A=H(""),R=H(""),te=H(!1),oe=H(null),r=H(null),U=H(Xe(Date.now())),ce=H(""),le=H(!1),K=H(!1),se=H(!1),X=Xe({soundAccuracy:3,rhythmIntonation:3,phraseAccuracy:3}),j=H(null),_e=H(!1),ie=H(Xe([])),x=H(null),he=H(null),xe=H(0),Ce=H("");const Er=Te(ue.humanReviews.getCurrentClaim,()=>({languageCode:e(m)})),Ae=Te(ue.humanReviews.getQueueSignal,()=>({languageCode:e(m)})),Tr=Te(ue.humanReviews.listEscalated,()=>({languageCode:e(m)}));je(()=>{!_()&&!G()&&Ca(ka("/login"))}),je(()=>{const a=setInterval(()=>{s(U,Date.now(),!0)},1e3);return()=>clearInterval(a)});const ar=$e(()=>!!v.data?.languages.find(a=>a.languageCode===e(m)&&a.active)),y=$e(()=>Er.data??null),tr=$e(()=>e(y)?.claimDeadlineAt?Math.max(e(y).claimDeadlineAt-e(U),0):0),Sr=$e(()=>Ae.data?.pendingCount??0);function Mr(a){const f=Math.floor(a/1e3),T=Math.floor(f/60),ve=f%60;return`${T}:${ve.toString().padStart(2,"0")}`}const Nr=["audio/webm;codecs=opus","audio/webm","audio/mp4","audio/ogg;codecs=opus"];function Lr(){return typeof MediaRecorder>"u"||typeof MediaRecorder.isTypeSupported!="function"?"":Nr.find(a=>MediaRecorder.isTypeSupported(a))??""}const or=$e(()=>Mr(e(tr)));je(()=>{if(!e(ar)||e(y)||e(le)||!Ae.data||Ae.data.pendingCount===0)return;const a=`${Ae.data.languageCode}:${Ae.data.oldestPendingId??"none"}:${Ae.data.pendingCount}`;a!==e(ce)&&(s(ce,a),qe(!0))});async function Dr(){if(!e(A).trim()){s(r,"Please enter a first name.");return}s(te,!0),s(r,null);try{await $.mutation(ue.verifierAccess.upsertMyProfile,{firstName:e(A).trim(),profileImageUrl:e(R).trim()||void 0}),await $.mutation(ue.verifierAccess.setMyLanguageActive,{languageCode:e(m),active:!0}),s(oe,"Verifier profile activated.")}catch(a){s(r,a instanceof Error?a.message:"Failed to activate verifier profile.",!0)}finally{s(te,!1)}}async function qe(a=!1){s(le,!0),a||(s(oe,null),s(r,null));try{const f=await $.mutation(ue.humanReviews.claimNext,{languageCode:e(m)});f&&s(ce,""),!f&&!a&&s(oe,"No pending learner attempts right now.")}catch(f){a||s(r,f instanceof Error?f.message:"Unable to claim next request.",!0)}finally{s(le,!1)}}async function Ur(){if(e(y)){s(K,!0),s(r,null);try{await $.mutation(ue.humanReviews.releaseClaim,{requestId:e(y).requestId}),s(ce,""),ze(),s(oe,"Claim released back to the top of queue.")}catch(a){s(r,a instanceof Error?a.message:"Failed to release claim.",!0)}finally{s(K,!1)}}}async function Fr(){if(s(Ce,""),s(ie,[],!0),s(x,null),s(he,null),s(xe,0),!navigator.mediaDevices?.getUserMedia){s(Ce,"Audio recording not supported in this browser.");return}try{const a=await navigator.mediaDevices.getUserMedia({audio:!0}),f=Lr(),T=f?new MediaRecorder(a,{mimeType:f}):new MediaRecorder(a);s(j,T,!0);const ve=Date.now();T.ondataavailable=Q=>{Q.data&&Q.data.size>0&&s(ie,[...e(ie),Q.data],!0)},T.onstop=()=>{const Q=T.mimeType||e(ie)[0]?.type||"audio/webm",W=new Blob(e(ie),{type:Q});s(x,W,!0),s(he,URL.createObjectURL(W),!0),s(xe,Date.now()-ve),a.getTracks().forEach(fe=>fe.stop())},T.start(),s(_e,!0)}catch(a){s(Ce,a instanceof Error?a.message:"Failed to start recording.",!0)}}function qr(){!e(j)||e(j).state!=="recording"||(e(j).stop(),s(_e,!1))}function ze(){s(ie,[],!0),s(x,null),s(he,null),s(xe,0)}async function zr(){if(!(!e(y)||!e(x))){s(se,!0),s(r,null),s(oe,null);try{const a=await $.mutation(ue.audioUploads.generateUploadUrlForVerifier,{}),f=await fetch(a,{method:"POST",headers:{"Content-Type":e(x).type||"audio/webm"},body:e(x)});if(!f.ok)throw new Error("Failed to upload exemplar audio.");const ve=(await f.json()).storageId,Q=await $.mutation(ue.audioAssets.create,{storageKey:ve,contentType:e(x).type||"audio/webm",attemptId:e(y).attemptId,durationMs:e(xe)});await $.mutation(ue.humanReviews.submitReview,{requestId:e(y).requestId,soundAccuracy:X.soundAccuracy,rhythmIntonation:X.rhythmIntonation,phraseAccuracy:X.phraseAccuracy,exemplarAudioAssetId:Q}),s(oe,"Review submitted."),ze(),await qe()}catch(a){s(r,a instanceof Error?a.message:"Failed to submit review.",!0)}finally{s(se,!1)}}}var Oe=nt(),sr=i(d(Oe),2);{var Or=a=>{var f=qa(),T=d(f,!0);u(f),Z(()=>E(T,e(r))),o(a,f)};ne(sr,a=>{e(r)&&a(Or)})}var ir=i(sr,2);{var Vr=a=>{var f=za(),T=d(f,!0);u(f),Z(()=>E(T,e(oe))),o(a,f)};ne(ir,a=>{e(oe)&&a(Vr)})}var nr=i(ir,2);N(nr,()=>Me,(a,f)=>{f(a,{class:"border border-border/60 bg-background/85 backdrop-blur-sm",children:(T,ve)=>{var Q=Ie(),W=Y(Q);N(W,()=>Se,(fe,de)=>{de(fe,{children:(pe,me)=>{var ae=Oa(),J=d(ae),F=i(d(J),2),ee=d(F,!0);u(F),u(J);var S=i(J,2),q=i(d(S),2),z=d(q,!0);u(q),u(S);var P=i(S,2),O=i(d(P),2),p=d(O,!0);u(O);var g=i(O,2),h=d(g,!0);u(g),u(P),u(ae),Z(()=>{E(ee,e(Sr)),E(z,Tr.data?.length??0),E(p,e(y)?e(or):"Idle"),E(h,e(y)?"Time remaining":"Ready for auto-assign")}),o(pe,ae)},$$slots:{default:!0}})}),o(T,Q)},$$slots:{default:!0}})});var lr=i(nr,2);N(lr,()=>Me,(a,f)=>{f(a,{class:"border border-border/60 bg-background/85 backdrop-blur-sm",children:(T,ve)=>{var Q=Qa(),W=Y(Q);N(W,()=>Ue,(de,pe)=>{pe(de,{children:(me,ae)=>{var J=Ie(),F=Y(J);N(F,()=>Fe,(ee,S)=>{S(ee,{children:(q,z)=>{D();var P=L("Language Team");o(q,P)},$$slots:{default:!0}})}),o(me,J)},$$slots:{default:!0}})});var fe=i(W,2);N(fe,()=>Se,(de,pe)=>{pe(de,{class:"space-y-3",children:(me,ae)=>{var J=Ba(),F=Y(J),ee=d(F);Re(ee,{for:"languageCode",children:(p,g)=>{D();var h=L("Language");o(p,h)},$$slots:{default:!0}});var S=i(ee,2),q=d(S);{var z=p=>{var g=Ie(),h=Y(g);La(h,17,()=>l.data.filter(k=>k.code==="xh-ZA"),Ma,(k,M)=>{var V=Va(),ke=d(V);u(V);var ge={};Z(()=>{E(ke,`${e(M).displayName??""} (${e(M).code??""})`),ge!==(ge=e(M).code)&&(V.value=(V.__value=e(M).code)??"")}),o(k,V)}),o(p,g)};ne(q,p=>{l.data&&p(z)})}u(S),u(F);var P=i(F,2);{var O=p=>{var g=Ha(),h=d(g);u(g),Z(()=>E(h,`Active verifier: ${v.data.profile.firstName??""}`)),o(p,g)};ne(P,p=>{v.data?.profile&&p(O)})}Ra(S,()=>e(m),p=>s(m,p)),o(me,J)},$$slots:{default:!0}})}),o(T,Q)},$$slots:{default:!0}})});var Hr=i(lr,2);{var Br=a=>{var f=Ie(),T=Y(f);N(T,()=>Me,(ve,Q)=>{Q(ve,{class:"border border-border/60 bg-background/85 backdrop-blur-sm",children:(W,fe)=>{var de=Ga(),pe=Y(de);N(pe,()=>Ue,(ae,J)=>{J(ae,{children:(F,ee)=>{var S=Ya(),q=Y(S);N(q,()=>Fe,(P,O)=>{O(P,{children:(p,g)=>{D();var h=L("Activate Verifier Access");o(p,h)},$$slots:{default:!0}})});var z=i(q,2);N(z,()=>Je,(P,O)=>{O(P,{children:(p,g)=>{D();var h=L("Set your visible identity and join this language team.");o(p,h)},$$slots:{default:!0}})}),o(F,S)},$$slots:{default:!0}})});var me=i(pe,2);N(me,()=>Se,(ae,J)=>{J(ae,{class:"space-y-3",children:(F,ee)=>{var S=Za(),q=Y(S),z=d(q);Re(z,{for:"firstName",children:(k,M)=>{D();var V=L("First Name");o(k,V)},$$slots:{default:!0}});var P=i(z,2);Ne(P,{id:"firstName",placeholder:"e.g. Lwazi",get value(){return e(A)},set value(k){s(A,k,!0)}}),u(q);var O=i(q,2),p=d(O);Re(p,{for:"profileImage",children:(k,M)=>{D();var V=L("Profile Image URL (optional)");o(k,V)},$$slots:{default:!0}});var g=i(p,2);Ne(g,{id:"profileImage",placeholder:"https://...",get value(){return e(R)},set value(k){s(R,k,!0)}}),u(O);var h=i(O,2);we(h,{class:"w-full",onclick:Dr,get disabled(){return e(te)},children:(k,M)=>{D();var V=L();Z(()=>E(V,e(te)?"Saving...":"Activate")),o(k,V)},$$slots:{default:!0}}),o(F,S)},$$slots:{default:!0}})}),o(W,de)},$$slots:{default:!0}})}),o(a,f)},Qr=a=>{var f=it(),T=Y(f);N(T,()=>Me,(W,fe)=>{fe(W,{class:"border border-border/60 bg-background/85 backdrop-blur-sm",children:(de,pe)=>{var me=Ja(),ae=Y(me);N(ae,()=>Ue,(F,ee)=>{ee(F,{children:(S,q)=>{var z=Ka(),P=Y(z);N(P,()=>Fe,(p,g)=>{g(p,{children:(h,k)=>{D();var M=L("Queue Control");o(h,M)},$$slots:{default:!0}})});var O=i(P,2);N(O,()=>Je,(p,g)=>{g(p,{children:(h,k)=>{D();var M=L("Auto-assign the next learner attempt when you are ready.");o(h,M)},$$slots:{default:!0}})}),o(S,z)},$$slots:{default:!0}})});var J=i(ae,2);N(J,()=>Se,(F,ee)=>{ee(F,{class:"space-y-3",children:(S,q)=>{var z=ja(),P=Y(z);{let g=$e(()=>e(le)||!!e(y));we(P,{class:"w-full",onclick:()=>qe(!1),get disabled(){return e(g)},size:"lg",children:(h,k)=>{D();var M=L();Z(()=>E(M,e(le)?"Claiming...":e(y)?"Claim Active":"Auto-Assign Next")),o(h,M)},$$slots:{default:!0}})}var O=i(P,2);{var p=g=>{var h=Xa(),k=d(h);u(h),Z(()=>E(k,`Timer: ${e(or)??""}`)),o(g,h)};ne(O,g=>{e(y)&&g(p)})}o(S,z)},$$slots:{default:!0}})}),o(de,me)},$$slots:{default:!0}})});var ve=i(T,2);{var Q=W=>{var fe=Ie(),de=Y(fe);N(de,()=>Me,(pe,me)=>{me(pe,{class:"border border-border/60 bg-background/85 backdrop-blur-sm",children:(ae,J)=>{var F=st(),ee=Y(F);N(ee,()=>Ue,(q,z)=>{z(q,{children:(P,O)=>{var p=Wa(),g=Y(p);N(g,()=>Fe,(k,M)=>{M(k,{children:(V,ke)=>{D();var ge=L();Z(()=>E(ge,e(y).phase==="dispute"?"Dispute Review":"Learner Attempt")),o(V,ge)},$$slots:{default:!0}})});var h=i(g,2);N(h,()=>Je,(k,M)=>{M(k,{children:(V,ke)=>{D();var ge=L();Z(()=>E(ge,`Claim ID: ${e(y).requestId??""}`)),o(V,ge)},$$slots:{default:!0}})}),o(P,p)},$$slots:{default:!0}})});var S=i(ee,2);N(S,()=>Se,(q,z)=>{z(q,{class:"space-y-4",children:(P,O)=>{var p=ot(),g=Y(p),h=i(d(g),2),k=d(h,!0);u(h);var M=i(h,2),V=d(M,!0);u(M),u(g);var ke=i(g,2);{var ge=n=>{var b=et(),I=i(d(b),2);u(b),Z(()=>kr(I,"src",e(y).learnerAttempt.audioUrl)),o(n,b)};ne(ke,n=>{e(y).learnerAttempt.audioUrl&&n(ge)})}var dr=i(ke,2);{var Yr=n=>{var b=rt(),I=i(d(b),2),re=d(I,!0);u(I);var Pe=i(I,2),Ze=d(Pe);u(Pe);var hr=i(Pe,2),oa=d(hr);u(hr),u(b),Z(()=>{E(re,e(y).originalReview.verifierFirstName),E(Ze,`Sound ${e(y).originalReview.soundAccuracy??""}/5
								• Rhythm ${e(y).originalReview.rhythmIntonation??""}/5
								• Phrase ${e(y).originalReview.phraseAccuracy??""}/5`),E(oa,`Additional checks complete: ${e(y).disputeProgress?.completed??0??""}/2`)}),o(n,b)};ne(dr,n=>{e(y).phase==="dispute"&&e(y).originalReview&&n(Yr)})}var Ve=i(dr,2),He=d(Ve),ur=d(He);Re(ur,{for:"scoreSound",children:(n,b)=>{D();var I=L("Sound Accuracy (1-5)");o(n,I)},$$slots:{default:!0}});var Zr=i(ur,2);Ne(Zr,{id:"scoreSound",type:"number",min:"1",max:"5",get value(){return X.soundAccuracy},set value(n){X.soundAccuracy=n}}),u(He);var Be=i(He,2),cr=d(Be);Re(cr,{for:"scoreRhythm",children:(n,b)=>{D();var I=L("Rhythm & Intonation (1-5)");o(n,I)},$$slots:{default:!0}});var Gr=i(cr,2);Ne(Gr,{id:"scoreRhythm",type:"number",min:"1",max:"5",get value(){return X.rhythmIntonation},set value(n){X.rhythmIntonation=n}}),u(Be);var vr=i(Be,2),fr=d(vr);Re(fr,{for:"scorePhrase",children:(n,b)=>{D();var I=L("Phrase Accuracy (1-5)");o(n,I)},$$slots:{default:!0}});var Kr=i(fr,2);Ne(Kr,{id:"scorePhrase",type:"number",min:"1",max:"5",get value(){return X.phraseAccuracy},set value(n){X.phraseAccuracy=n}}),u(vr),u(Ve);var Qe=i(Ve,2),Ye=i(d(Qe),2),pr=d(Ye);{var Xr=n=>{we(n,{size:"sm",onclick:Fr,children:(b,I)=>{D();var re=L("Start Recording");o(b,re)},$$slots:{default:!0}})},jr=n=>{we(n,{size:"sm",variant:"destructive",onclick:qr,children:(b,I)=>{D();var re=L("Stop Recording");o(b,re)},$$slots:{default:!0}})};ne(pr,n=>{e(_e)?n(jr,!1):n(Xr)})}var Jr=i(pr,2);{var Wr=n=>{we(n,{size:"sm",variant:"outline",onclick:ze,children:(b,I)=>{D();var re=L("Discard");o(b,re)},$$slots:{default:!0}})};ne(Jr,n=>{e(he)&&n(Wr)})}u(Ye);var mr=i(Ye,2);{var ea=n=>{var b=at(),I=d(b,!0);u(b),Z(()=>E(I,e(Ce))),o(n,b)};ne(mr,n=>{e(Ce)&&n(ea)})}var ra=i(mr,2);{var aa=n=>{var b=tt(),I=d(b),re=d(I);u(I);var Pe=i(I,2);u(b),Z(Ze=>{E(re,`Duration: ${Ze??""}s`),kr(Pe,"src",e(he))},[()=>Math.floor(e(xe)/1e3)]),o(n,b)};ne(ra,n=>{e(he)&&n(aa)})}u(Qe);var gr=i(Qe,2),_r=d(gr);{let n=$e(()=>e(K)||e(se));we(_r,{variant:"outline",onclick:Ur,get disabled(){return e(n)},children:(b,I)=>{D();var re=L();Z(()=>E(re,e(K)?"Releasing...":"Release")),o(b,re)},$$slots:{default:!0}})}var ta=i(_r,2);{let n=$e(()=>e(se)||!e(x)||e(tr)<=0);we(ta,{onclick:zr,get disabled(){return e(n)},children:(b,I)=>{D();var re=L();Z(()=>E(re,e(se)?"Submitting...":"Submit Review")),o(b,re)},$$slots:{default:!0}})}u(gr),Z(()=>{E(k,e(y).phrase?.english),E(V,e(y).phrase?.translation)}),o(P,p)},$$slots:{default:!0}})}),o(ae,F)},$$slots:{default:!0}})}),o(W,fe)};ne(ve,W=>{e(y)&&W(Q)})}o(a,f)};ne(Hr,a=>{!v.data?.profile||!e(ar)?a(Br):a(Qr,!1)})}u(Oe),o(t,Oe),wa(),w()}export{_t as component};

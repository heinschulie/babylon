import{a as r,f as _,t as P,c as j}from"../chunks/1f615a2c.js";import{p as Tr,d as Yr,t as Y,a as Zr,c as l,s as e,n as g,r as t,f as m,l as k,i,m as M,o as vr}from"../chunks/8b0cb860.js";import{s as X}from"../chunks/63f41f2c.js";import{i as er,s as ur,a as qr,b as Fr}from"../chunks/c17651b9.js";import{e as _r}from"../chunks/62e4c738.js";import{c as d}from"../chunks/c1381360.js";import{r as fr,s as Nr}from"../chunks/0701c483.js";import{g as Or}from"../chunks/dd297ec3.js";import{a as hr}from"../chunks/fb331d7f.js";import{B as tr}from"../chunks/8f85ef07.js";import{C as ir}from"../chunks/840838e0.js";import{C as $r}from"../chunks/3cc6752e.js";import{C as gr,a as mr,b as xr}from"../chunks/4e6716dc.js";import{D as Qr,a as Wr,b as jr,c as Hr,d as Jr,e as Kr,f as Mr}from"../chunks/a31edcf7.js";import{L as br,I as Pr}from"../chunks/48c7201b.js";import{i as Rr,a as Ur}from"../chunks/8c84ee26.js";import{u as Vr,a as ra}from"../chunks/b1448760.js";var aa=_("<!> <!>",1),ea=_('<p class="text-sm text-destructive"> </p>'),ta=_("<!> <!>",1),sa=_('<!> <div class="space-y-4 py-4"><div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div> <!></div> <!>',1),oa=_("<!> <!>",1),la=_('<div class="grid gap-4 sm:grid-cols-3"><div><p class="info-kicker">Saved Phrases</p> <p class="mt-2 text-4xl font-display"> </p></div> <div><p class="info-kicker">Categories</p> <p class="mt-2 text-4xl font-display"> </p></div> <div><p class="info-kicker">Suggested Session</p> <p class="mt-2 text-lg font-semibold">5-10 minutes</p> <p class="meta-text mt-1">Perfect for commute gaps and quick breaks.</p></div></div>'),ia=_('<p class="meta-text">Loading phrases...</p>'),da=_('<p class="text-destructive"> </p>'),na=_("<!> <!>",1),pa=_("<!> <!>",1),ca=_('<li class="phrase-card border border-border/60 bg-background/70 p-4 sm:p-5"><p class="info-kicker">English</p> <p class="mt-2 text-xl font-semibold leading-tight sm:text-2xl"> </p> <p class="info-kicker mt-5">Xhosa</p> <p class="xhosa-phrase mt-2 font-black"> </p></li>'),va=_('<ul class="space-y-3"></ul>'),ua=_("<!> <!>",1),_a=_('<div class="space-y-4"></div>'),fa=_('<div class="page-shell page-shell--narrow page-stack"><header class="page-stack"><div><p class="info-kicker">Daily Practice Setup</p> <h1 class="text-5xl sm:text-6xl">Phrase Library</h1> <p class="meta-text mt-3 max-w-2xl">Store phrases once, then train in short bursts when you have a spare minute.</p></div> <div class="grid gap-3 sm:grid-cols-2"><a class="block"><!></a> <!></div></header> <!> <section class="page-stack"><h2 class="text-4xl sm:text-5xl">Your Phrase Groups</h2> <!></section></div>');function Ga(kr,yr){Tr(yr,!0);const Cr=()=>ur(Rr,"$isLoading",dr),Ar=()=>ur(Ur,"$isAuthenticated",dr),[dr,Dr]=qr(),Lr=Vr(),z=ra(hr.phrases.listGroupedByCategory,{});Yr(()=>{!Cr()&&!Ar()&&Or(fr("/login"))});let R=M(!1),H=M(""),J=M(""),U=M(!1),K=M("");const wr=vr(()=>z.data?.reduce((s,y)=>s+y.phrases.length,0)??0),Sr=vr(()=>z.data?.length??0);async function Er(){if(!i(H).trim()||!i(J).trim()){k(K,"Please enter both English and translation.");return}k(U,!0),k(K,"");try{await Lr.mutation(hr.phrases.createDirect,{english:i(H).trim(),translation:i(J).trim(),languageCode:"xh-ZA"}),k(R,!1),k(H,""),k(J,"")}catch(s){k(K,s instanceof Error?s.message:"Failed to add phrase",!0)}finally{k(U,!1)}}var sr=fa(),or=l(sr),nr=e(l(or),2),V=l(nr),Br=l(V);tr(Br,{class:"w-full",size:"lg",children:(s,y)=>{g();var S=P("Start Practice");r(s,S)},$$slots:{default:!0}}),t(V);var Gr=e(V,2);d(Gr,()=>Mr,(s,y)=>{y(s,{get open(){return i(R)},set open(S){k(R,S,!0)},children:(S,lr)=>{var Z=oa(),C=m(Z);{const E=(B,I)=>{tr(B,Fr(()=>I?.().props,{variant:"outline",class:"w-full",size:"lg",children:(v,b)=>{g();var h=P("Add Phrase");r(v,h)},$$slots:{default:!0}}))};d(C,()=>Qr,(B,I)=>{I(B,{child:E,$$slots:{child:!0}})})}var L=e(C,2);d(L,()=>Wr,(E,B)=>{B(E,{children:(I,x)=>{var v=sa(),b=m(v);d(b,()=>jr,(a,n)=>{n(a,{children:(u,q)=>{var p=aa(),c=m(p);d(c,()=>Hr,(o,$)=>{$(o,{children:(f,W)=>{g();var D=P("Add Phrase");r(f,D)},$$slots:{default:!0}})});var w=e(c,2);d(w,()=>Jr,(o,$)=>{$(o,{children:(f,W)=>{g();var D=P("Target language: Xhosa (`xh-ZA`).");r(f,D)},$$slots:{default:!0}})}),r(u,p)},$$slots:{default:!0}})});var h=e(b,2),A=l(h),G=l(A);br(G,{for:"english",children:(a,n)=>{g();var u=P("English phrase");r(a,u)},$$slots:{default:!0}});var F=e(G,2);Pr(F,{id:"english",placeholder:"e.g. Where is the taxi rank?",get value(){return i(H)},set value(a){k(H,a,!0)}}),t(A);var T=e(A,2),N=l(T);br(N,{for:"translation",children:(a,n)=>{g();var u=P("Your Xhosa phrase");r(a,u)},$$slots:{default:!0}});var rr=e(N,2);Pr(rr,{id:"translation",placeholder:"Type your phrase...",get value(){return i(J)},set value(a){k(J,a,!0)}}),t(T);var O=e(T,2);{var Q=a=>{var n=ea(),u=l(n,!0);t(n),Y(()=>X(u,i(K))),r(a,n)};er(O,a=>{i(K)&&a(Q)})}t(h);var ar=e(h,2);d(ar,()=>Kr,(a,n)=>{n(a,{children:(u,q)=>{var p=ta(),c=m(p);tr(c,{variant:"outline",onclick:()=>k(R,!1),children:(o,$)=>{g();var f=P("Cancel");r(o,f)},$$slots:{default:!0}});var w=e(c,2);tr(w,{onclick:Er,get disabled(){return i(U)},children:(o,$)=>{g();var f=P();Y(()=>X(f,i(U)?"Adding...":"Add Phrase")),r(o,f)},$$slots:{default:!0}}),r(u,p)},$$slots:{default:!0}})}),r(I,v)},$$slots:{default:!0}})}),r(S,Z)},$$slots:{default:!0}})}),t(nr),t(or);var pr=e(or,2);d(pr,()=>ir,(s,y)=>{y(s,{class:"border border-border/60 bg-background/85 backdrop-blur-sm",children:(S,lr)=>{var Z=j(),C=m(Z);d(C,()=>$r,(L,E)=>{E(L,{children:(B,I)=>{var x=la(),v=l(x),b=e(l(v),2),h=l(b,!0);t(b),t(v);var A=e(v,2),G=e(l(A),2),F=l(G,!0);t(G),t(A),g(2),t(x),Y(()=>{X(h,i(wr)),X(F,i(Sr))}),r(B,x)},$$slots:{default:!0}})}),r(S,Z)},$$slots:{default:!0}})});var cr=e(pr,2),Xr=e(l(cr),2);{var zr=s=>{var y=ia();r(s,y)},Ir=s=>{var y=j(),S=m(y);{var lr=C=>{var L=da(),E=l(L);t(L),Y(()=>X(E,`Error loading phrases: ${z.error.message??""}`)),r(C,L)},Z=C=>{var L=j(),E=m(L);{var B=x=>{var v=j(),b=m(v);d(b,()=>ir,(h,A)=>{A(h,{class:"border border-border/60 bg-background/85 backdrop-blur-sm",children:(G,F)=>{var T=j(),N=m(T);d(N,()=>gr,(rr,O)=>{O(rr,{children:(Q,ar)=>{var a=na(),n=m(a);d(n,()=>mr,(q,p)=>{p(q,{children:(c,w)=>{g();var o=P("No phrases yet");r(c,o)},$$slots:{default:!0}})});var u=e(n,2);d(u,()=>xr,(q,p)=>{p(q,{children:(c,w)=>{g();var o=P("Add your first phrase to start building your library.");r(c,o)},$$slots:{default:!0}})}),r(Q,a)},$$slots:{default:!0}})}),r(G,T)},$$slots:{default:!0}})}),r(x,v)},I=x=>{var v=_a();_r(v,21,()=>z.data,b=>b.key,(b,h)=>{var A=j(),G=m(A);d(G,()=>ir,(F,T)=>{T(F,{class:"border border-border/60 bg-background/85 backdrop-blur-sm",children:(N,rr)=>{var O=ua(),Q=m(O);d(Q,()=>gr,(a,n)=>{n(a,{class:"border-b border-border/50 pb-4",children:(u,q)=>{var p=pa(),c=m(p);d(c,()=>mr,(o,$)=>{$(o,{class:"text-3xl sm:text-4xl",children:(f,W)=>{g();var D=P();Y(()=>X(D,i(h).label)),r(f,D)},$$slots:{default:!0}})});var w=e(c,2);d(w,()=>xr,(o,$)=>{$(o,{children:(f,W)=>{g();var D=P();Y(()=>X(D,`${i(h).phrases.length??""} phrase(s)`)),r(f,D)},$$slots:{default:!0}})}),r(u,p)},$$slots:{default:!0}})});var ar=e(Q,2);d(ar,()=>$r,(a,n)=>{n(a,{children:(u,q)=>{var p=va();_r(p,21,()=>i(h).phrases,c=>c._id,(c,w)=>{var o=ca(),$=e(l(o),2),f=l($,!0);t($);var W=e($,4),D=l(W,!0);t(W),t(o),Y(()=>{X(f,i(w).english),X(D,i(w).translation)}),r(c,o)}),t(p),r(u,p)},$$slots:{default:!0}})}),r(N,O)},$$slots:{default:!0}})}),r(b,A)}),t(v),r(x,v)};er(E,x=>{!z.data||z.data.length===0?x(B):x(I,!1)},!0)}r(C,L)};er(S,C=>{z.error?C(lr):C(Z,!1)},!0)}r(s,y)};er(Xr,s=>{z.isLoading?s(zr):s(Ir,!1)})}t(cr),t(sr),Y(s=>Nr(V,"href",s),[()=>fr("/practice")]),r(kr,sr),Zr(),Dr()}export{Ga as component};
